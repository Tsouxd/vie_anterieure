<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quelle √©tait votre vie ant√©rieure ? | Quiz Mystique</title>
  <meta name="description" content="D√©couvrez l'arch√©type qui d√©finissait votre essence dans une vie pass√©e.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --background: 240 10% 3.9%;
      --foreground: 0 0% 98%;
      --card: 240 10% 3.9%;
      --primary: 263 70% 50%;
      --primary-foreground: 0 0% 98%;
      --secondary: 320 65% 52%;
      --muted: 240 3.7% 15.9%;
      --muted-foreground: 240 5% 64.9%;
      --border: 240 3.7% 15.9%;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', sans-serif;
      background: hsl(var(--background));
      color: hsl(var(--foreground));
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }

    .container {
      max-width: 48rem;
      width: 100%;
      text-align: center;
    }

    .font-serif { font-family: 'Playfair Display', serif; }

    .text-gradient {
      background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--secondary)));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: 0.75rem;
      padding: 1rem;
      margin-bottom: 1.5rem;
    }

    @media (min-width: 768px) { .card { padding: 2rem; } }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 2rem;
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      font-size: 1rem;
    }

    .btn-primary {
      background: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
      box-shadow: 0 0 20px hsl(var(--primary) / 0.4);
    }

    .btn-primary:hover {
      opacity: 0.9;
      transform: scale(1.02);
      box-shadow: 0 0 30px hsl(var(--primary) / 0.6);
    }

    .btn-outline {
      background: transparent;
      border: 1px solid hsl(var(--border));
      color: hsl(var(--foreground));
      width: 100%;
      text-align: left;
      justify-content: flex-start;
      padding: 0.75rem 1rem;
      font-size: 0.875rem;
    }

    @media (min-width: 768px) {
      .btn-outline { padding: 1rem 1.5rem; font-size: 1rem; }
    }

    .btn-outline:hover {
      background: hsl(var(--primary) / 0.1);
      border-color: hsl(var(--primary));
      transform: scale(1.02);
    }

    .progress-bar {
      height: 0.5rem;
      background: hsl(var(--muted));
      border-radius: 9999px;
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary)));
      transition: width 0.5s ease;
    }

    .option-letter {
      color: hsl(var(--primary));
      font-weight: 600;
      margin-right: 0.5rem;
      flex-shrink: 0;
    }

    .options-list { display: flex; flex-direction: column; gap: 0.75rem; }
    @media (min-width: 768px) { .options-list { gap: 1rem; } }

    .question-text { font-size: 1.25rem; margin-bottom: 1.5rem; line-height: 1.6; }
    @media (min-width: 768px) { .question-text { font-size: 1.5rem; margin-bottom: 2rem; } }

    .text-muted { color: hsl(var(--muted-foreground)); }
    .text-primary { color: hsl(var(--primary)); }
    .text-sm { font-size: 0.875rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .hidden { display: none; }

    .trait-item {
      display: flex; align-items: center; gap: 0.75rem; padding: 1rem;
      background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border) / 0.5); border-radius: 0.5rem;
    }

    .trait-dot {
      width: 0.5rem; height: 0.5rem; border-radius: 50%;
      background: hsl(var(--primary)); box-shadow: 0 0 10px hsl(var(--primary) / 0.5);
    }

    .traits-grid { display: grid; gap: 1rem; }
    @media (min-width: 768px) { .traits-grid { grid-template-columns: repeat(2, 1fr); } }

    .axis-item {
      display: flex; gap: 1rem; padding: 1.5rem;
      background: linear-gradient(90deg, hsl(var(--muted) / 0.4), transparent);
      border: 1px solid hsl(var(--border) / 0.5); border-radius: 0.5rem; text-align: left;
    }

    .axis-number {
      width: 2.5rem; height: 2.5rem; border-radius: 50%;
      background: hsl(var(--primary) / 0.2); border: 2px solid hsl(var(--primary));
      display: flex; align-items: center; justify-content: center;
      color: hsl(var(--primary)); font-weight: bold; flex-shrink: 0;
    }

    .section-title { font-size: 1.5rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem; text-align: left; }

    h1 { font-size: 2.5rem; margin-bottom: 1rem; }
    @media (min-width: 768px) { h1 { font-size: 3.5rem; } }

    .fade-in { animation: fadeIn 0.5s ease-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .sparkle { color: hsl(var(--primary)); }

    /* NOUVEAUX STYLES POUR LE FORMULAIRE */
    .form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }
    
    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      color: hsl(var(--muted-foreground));
      font-size: 0.9rem;
    }

    .form-input {
      width: 100%;
      padding: 0.8rem 1rem;
      background: hsl(var(--muted) / 0.5);
      border: 1px solid hsl(var(--border));
      border-radius: 0.5rem;
      color: hsl(var(--foreground));
      font-family: inherit;
      font-size: 1rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-input:focus {
      outline: none;
      border-color: hsl(var(--primary));
      box-shadow: 0 0 0 3px hsl(var(--primary) / 0.2);
    }

    .error-msg {
      color: #ff4d4d;
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Welcome / Login Screen -->
    <div id="welcome" class="fade-in">
      <p class="text-primary text-sm mb-4">‚ú® Quiz Mystique ‚ú®</p>
      <h1 class="font-serif text-gradient">Quelle √©tait votre vie ant√©rieure ?</h1>
      <p class="text-muted mb-6">Entrez dans le cercle sacr√© pour d√©couvrir votre essence pass√©e.</p>
      
      <div class="card" style="max-width: 400px; margin: 0 auto 2rem auto;">
        <div class="form-group">
          <label class="form-label">Votre nom mystique</label>
          <input type="text" id="user-name" class="form-input" placeholder="Ex: Arthur Pendragon">
        </div>
        <div class="form-group">
          <label class="form-label">Votre courriel astral</label>
          <input type="email" id="user-email" class="form-input" placeholder="Ex: arthur@camelot.com">
        </div>
        <div id="form-error" class="error-msg">Veuillez remplir tous les champs pour commencer.</div>
      </div>

      <button class="btn btn-primary" onclick="validateAndStart()">‚ú® Commencer le Quiz</button>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz" class="hidden">
      <div class="mb-4" style="display: flex; justify-content: space-between;">
        <span class="text-sm text-muted">Question <span id="current-q">1</span> sur <span id="total-q">30</span></span>
        <span class="text-sm text-primary" style="font-weight: 500;"><span id="percent">0</span>%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress" style="width: 0%"></div>
      </div>
      <div class="card fade-in">
        <h2 class="font-serif question-text" id="question-text"></h2>
        <div class="options-list" id="options"></div>
      </div>
    </div>

    <!-- Result Screen -->
    <div id="result" class="hidden">
      <p class="text-primary text-sm mb-4">‚ú® R√©sultats pour <span id="display-username"></span> ‚ú®</p>
      <h1 class="font-serif text-gradient" id="result-name"></h1>
      <p class="text-muted mb-6" id="result-desc"></p>
      
      <div class="card" style="text-align: left;">
        <h2 class="font-serif section-title"><span class="sparkle">‚ú®</span> Vos Traits Caract√©ristiques</h2>
        <div class="traits-grid" id="traits"></div>
      </div>
      
      <div class="card" style="text-align: left;">
        <h2 class="font-serif section-title"><span class="sparkle">‚ú®</span> Vos 3 Axes de Travail</h2>
        <div id="axes" style="display: flex; flex-direction: column; gap: 1rem;"></div>
      </div>
      
      <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Recommencer le Quiz</button>
    </div>
  </div>

  <script>
    // Variable pour stocker les infos de l'utilisateur
    let currentUser = {
        name: '',
        email: ''
    };

    const questions = [
      { id: 1, text: "Face au danger, quelle est votre premi√®re r√©action ?", options: [ { label: "J'affronte la menace avec courage et d√©termination", archetype: "Guerrier" }, { label: "Je cherche √† comprendre la situation et trouve une solution intelligente", archetype: "Sage" }, { label: "J'utilise mon intuition et des m√©thodes myst√©rieuses pour me prot√©ger", archetype: "Sorcier" }, { label: "Je fuis strat√©giquement pour mieux revenir", archetype: "Explorateur" } ] },
      { id: 2, text: "Quel est votre plus grand r√™ve dans la vie ?", options: [ { label: "Diriger et avoir de l'influence sur les autres", archetype: "Souverain" }, { label: "D√©couvrir tous les secrets et myst√®res de l'univers", archetype: "Sage" }, { label: "Soulager la souffrance et aider ceux qui en ont besoin", archetype: "Gu√©risseur" }, { label: "Vivre libre, sans contraintes ni limites", archetype: "Rebelle" } ] },
      { id: 3, text: "Dans quel environnement vous sentez-vous le plus √† votre place ?", options: [ { label: "Un ch√¢teau ou un palais avec du pouvoir et du prestige", archetype: "Souverain" }, { label: "Une biblioth√®que remplie de livres anciens et de connaissances", archetype: "Sage" }, { label: "Une for√™t myst√©rieuse o√π r√®gne la magie", archetype: "Sorcier" }, { label: "Les routes ouvertes, toujours en mouvement vers de nouveaux horizons", archetype: "Explorateur" } ] },
      { id: 4, text: "Comment pr√©f√©rez-vous r√©soudre un conflit ?", options: [ { label: "Par la force physique ou l'intimidation", archetype: "Guerrier" }, { label: "Par la diplomatie, le charme et la n√©gociation", archetype: "Courtisan" }, { label: "Par la m√©ditation et la recherche de paix int√©rieure", archetype: "Pr√™tre" }, { label: "En trouvant une √©chappatoire ou en contournant le probl√®me", archetype: "Rebelle" } ] },
      { id: 5, text: "Si vous pouviez ma√Ætriser un talent parfaitement, lequel choisiriez-vous ?", options: [ { label: "Les arts martiaux et les techniques de combat", archetype: "Guerrier" }, { label: "La musique, la po√©sie et l'art de raconter des histoires", archetype: "Barde" }, { label: "Les rituels magiques et les incantations", archetype: "Sorcier" }, { label: "L'artisanat et la cr√©ation d'objets magnifiques", archetype: "Artisan" } ] },
      { id: 6, text: "Dans un groupe, quel r√¥le adoptez-vous naturellement ?", options: [ { label: "Le chef qui prend les d√©cisions et donne les ordres", archetype: "Souverain" }, { label: "Le conseiller sage qui guide avec sa r√©flexion", archetype: "Sage" }, { label: "Le protecteur qui d√©fend les membres du groupe", archetype: "Guerrier" }, { label: "L'√¢me du groupe qui remonte le moral et raconte des histoires", archetype: "Barde" } ] },
      { id: 7, text: "Quelle phrase r√©sonne le plus en vous ?", options: [ { label: "La connaissance est le v√©ritable pouvoir", archetype: "Sage" }, { label: "L'amour transcende toutes les barri√®res", archetype: "Courtisan" }, { label: "Seul on va plus vite, ensemble on va plus loin", archetype: "Pr√™tre" }, { label: "Les r√®gles sont faites pour √™tre bris√©es", archetype: "Rebelle" } ] },
      { id: 8, text: "Quel est votre rapport √† la spiritualit√© ?", options: [ { label: "Je cherche activement l'illumination et le contact avec le divin", archetype: "Pr√™tre" }, { label: "Je pr√©f√®re la solitude m√©ditative loin du monde", archetype: "Ermite" }, { label: "J'utilise les forces mystiques et l'√©nergie universelle", archetype: "Sorcier" }, { label: "Je suis pragmatique, je crois seulement ce que je vois", archetype: "Guerrier" } ] },
      { id: 9, text: "Qu'est-ce qui vous fait vous lever le matin avec enthousiasme ?", options: [ { label: "Le d√©sir de vaincre et de conqu√©rir de nouveaux d√©fis", archetype: "Guerrier" }, { label: "La passion de cr√©er quelque chose de beau de vos mains", archetype: "Artisan" }, { label: "Le besoin profond d'aider et de soigner les autres", archetype: "Gu√©risseur" }, { label: "La soif de d√©couvrir des lieux et des exp√©riences inconnus", archetype: "Explorateur" } ] },
      { id: 10, text: "Comment g√©rez-vous vos √©motions ?", options: [ { label: "Je les ma√Ætrise compl√®tement par la discipline mentale", archetype: "Ermite" }, { label: "Je les exprime pleinement et librement", archetype: "Courtisan" }, { label: "Je les canalise dans l'action et le mouvement", archetype: "Guerrier" }, { label: "Je les transforme en cr√©ations artistiques", archetype: "Barde" } ] },
      { id: 11, text: "Quel type de pouvoir vous fascine le plus ?", options: [ { label: "Le pouvoir politique et l'autorit√© sur les autres", archetype: "Souverain" }, { label: "Le pouvoir de gu√©rir les corps et les √¢mes", archetype: "Gu√©risseur" }, { label: "Le pouvoir occulte et les secrets myst√©rieux", archetype: "Sorcier" }, { label: "Le pouvoir de s√©duire et d'influencer par le charme", archetype: "Courtisan" } ] },
      { id: 12, text: "Face √† une grande injustice, quelle est votre r√©action ?", options: [ { label: "Vous vous rebellez et luttez pour renverser le syst√®me", archetype: "Rebelle" }, { label: "Vous cherchez √† r√©former de l'int√©rieur avec sagesse", archetype: "Souverain" }, { label: "Vous offrez r√©confort et soutien aux victimes", archetype: "Gu√©risseur" }, { label: "Vous d√©noncez l'injustice par l'art et les mots", archetype: "Barde" } ] },
      { id: 13, text: "Quelle est votre relation √† l'argent et aux richesses mat√©rielles ?", options: [ { label: "C'est un moyen de financer mes voyages et d√©couvertes", archetype: "Explorateur" }, { label: "C'est secondaire, je cherche la richesse int√©rieure", archetype: "Ermite" }, { label: "C'est un outil essentiel de pouvoir et d'influence", archetype: "Souverain" }, { label: "C'est le fruit de mes √©changes et de mon commerce", archetype: "Explorateur" } ] },
      { id: 14, text: "Quel animal repr√©sente le mieux votre essence ?", options: [ { label: "Le loup solitaire qui parcourt les montagnes", archetype: "Ermite" }, { label: "Le lion majestueux, roi de la savane", archetype: "Souverain" }, { label: "L'aigle visionnaire qui voit tout d'en haut", archetype: "Sage" }, { label: "Le renard rus√© qui d√©joue tous les pi√®ges", archetype: "Rebelle" } ] },
      { id: 15, text: "Comment pr√©f√©rez-vous transmettre votre savoir aux autres ?", options: [ { label: "Par l'enseignement patient et structur√©", archetype: "Sage" }, { label: "Par l'exemple et l'action concr√®te", archetype: "Guerrier" }, { label: "Par les histoires, l√©gendes et chansons", archetype: "Barde" }, { label: "Par les rituels et l'initiation mystique", archetype: "Pr√™tre" } ] },
      { id: 16, text: "Quelle est votre plus grande peur secr√®te ?", options: [ { label: "Perdre ma libert√© et √™tre enferm√©", archetype: "Rebelle" }, { label: "√ätre impuissant face √† la souffrance des autres", archetype: "Gu√©risseur" }, { label: "Perdre mon pouvoir et mon influence", archetype: "Souverain" }, { label: "Mourir sans avoir d√©couvert la v√©rit√© ultime", archetype: "Sage" } ] },
      { id: 17, text: "Dans quel moment vous sentez-vous le plus vivant et accompli ?", options: [ { label: "Quand vous cr√©ez quelque chose de vos propres mains", archetype: "Artisan" }, { label: "Quand vous √™tes en plein combat ou comp√©tition", archetype: "Guerrier" }, { label: "Quand vous √™tes en communion spirituelle avec le divin", archetype: "Pr√™tre" }, { label: "Quand vous s√©duisez et charmez quelqu'un", archetype: "Courtisan" } ] },
      { id: 18, text: "Quelle est votre perception du temps ?", options: [ { label: "Je vis intens√©ment dans l'instant pr√©sent", archetype: "Courtisan" }, { label: "J'√©tudie le pass√© pour comprendre le pr√©sent", archetype: "Sage" }, { label: "Je per√ßois l'avenir et ses possibilit√©s", archetype: "Sorcier" }, { label: "Le temps est une illusion, seul l'√©ternel compte", archetype: "Ermite" } ] },
      { id: 19, text: "Que repr√©sente pour vous la soci√©t√© et la civilisation ?", options: [ { label: "Un syst√®me complexe √† organiser et √† gouverner", archetype: "Souverain" }, { label: "Une prison qui limite ma v√©ritable nature", archetype: "Ermite" }, { label: "Un ordre √©tabli qui doit √™tre chang√© et d√©fi√©", archetype: "Rebelle" }, { label: "Un vaste terrain d'opportunit√©s et de d√©couvertes", archetype: "Explorateur" } ] },
      { id: 20, text: "Quel est votre rapport aux traditions et coutumes ancestrales ?", options: [ { label: "Je les pr√©serve et les transmets fid√®lement", archetype: "Pr√™tre" }, { label: "Je les √©tudie pour en extraire la sagesse cach√©e", archetype: "Sage" }, { label: "Je les d√©fie et j'innove au-del√† d'elles", archetype: "Rebelle" }, { label: "Je les respecte mais les adapte √† mon √©poque", archetype: "Artisan" } ] },
      { id: 21, text: "Si vous pouviez avoir un don surnaturel, lequel choisiriez-vous ?", options: [ { label: "La t√©l√©pathie et le contr√¥le des esprits", archetype: "Sorcier" }, { label: "Le pouvoir de gu√©rison instantan√©e", archetype: "Gu√©risseur" }, { label: "Une force physique surhumaine", archetype: "Guerrier" }, { label: "La capacit√© de voir l'avenir", archetype: "Sage" } ] },
      { id: 22, text: "Quelle est votre vision de l'amour ?", options: [ { label: "Une passion d√©vorante et essentielle √† la vie", archetype: "Courtisan" }, { label: "Un lien spirituel profond entre deux √¢mes", archetype: "Pr√™tre" }, { label: "Une distraction qui d√©tourne de ma mission", archetype: "Guerrier" }, { label: "Un art subtil √† ma√Ætriser et √† c√©l√©brer", archetype: "Barde" } ] },
      { id: 23, text: "Face √† un ph√©nom√®ne myst√©rieux et inexplicable, que faites-vous ?", options: [ { label: "Je cherche l'explication rationnelle et scientifique", archetype: "Sage" }, { label: "J'accepte le myst√®re comme partie du plan divin", archetype: "Pr√™tre" }, { label: "J'utilise mes connaissances magiques pour le comprendre", archetype: "Sorcier" }, { label: "Je pars √† l'aventure pour l'explorer directement", archetype: "Explorateur" } ] },
      { id: 24, text: "Quelle est selon vous votre plus grande qualit√© ?", options: [ { label: "Mon courage in√©branlable face √† l'adversit√©", archetype: "Guerrier" }, { label: "Ma compassion infinie envers tous les √™tres", archetype: "Gu√©risseur" }, { label: "Mon esprit cr√©atif et mon ing√©niosit√©", archetype: "Artisan" }, { label: "Mon charisme naturel et mon pouvoir de s√©duction", archetype: "Courtisan" } ] },
      { id: 25, text: "Si vous deviez choisir une vie simple et modeste, ce serait...", options: [ { label: "Ermite solitaire en haut d'une montagne", archetype: "Ermite" }, { label: "Artisan humble dans un petit village", archetype: "Artisan" }, { label: "Voyageur perp√©tuel sans attaches", archetype: "Explorateur" }, { label: "Impossible ! Je refuse la simplicit√© et la m√©diocrit√©", archetype: "Souverain" } ] },
      { id: 26, text: "Quelle est votre relation avec la mort ?", options: [ { label: "Elle fait partie du cycle naturel de la vie", archetype: "Gu√©risseur" }, { label: "Je la combats et la d√©fie jusqu'au bout", archetype: "Guerrier" }, { label: "C'est une porte mystique vers un autre monde", archetype: "Sorcier" }, { label: "Je pr√©f√®re ne pas trop y penser et profiter de la vie", archetype: "Explorateur" } ] },
      { id: 27, text: "Quel h√©ritage souhaitez-vous laisser apr√®s votre passage sur terre ?", options: [ { label: "Des ≈ìuvres d'art immortelles et magnifiques", archetype: "Artisan" }, { label: "Un empire prosp√®re ou une dynastie puissante", archetype: "Souverain" }, { label: "Des connaissances pr√©cieuses et des enseignements", archetype: "Sage" }, { label: "Une r√©volution sociale qui change le monde", archetype: "Rebelle" } ] },
      { id: 28, text: "Quelle est votre m√©thode d'apprentissage pr√©f√©r√©e ?", options: [ { label: "L'√©tude solitaire dans les livres et manuscrits", archetype: "Sage" }, { label: "L'apprentissage par la pratique et l'exp√©rimentation", archetype: "Artisan" }, { label: "L'enseignement direct d'un ma√Ætre spirituel", archetype: "Pr√™tre" }, { label: "L'exp√©rience v√©cue √† travers les voyages", archetype: "Explorateur" } ] },
      { id: 29, text: "Comment c√©l√©brez-vous une grande victoire ou r√©ussite ?", options: [ { label: "Par un grand festin avec r√©cits √©piques et chansons", archetype: "Barde" }, { label: "Dans la solitude et la m√©ditation de gratitude", archetype: "Ermite" }, { label: "En planifiant imm√©diatement la prochaine conqu√™te", archetype: "Guerrier" }, { label: "En partageant ma r√©ussite avec ceux qui en ont besoin", archetype: "Gu√©risseur" } ] },
      { id: 30, text: "Quelle phrase finale r√©sonne le plus profond√©ment en vous ?", options: [ { label: "Je suis le cr√©ateur de ma propre destin√©e", archetype: "Sorcier" }, { label: "Je suis celui qui prot√®ge et guide les autres", archetype: "Guerrier" }, { label: "Je suis l'√©ternel chercheur de v√©rit√© et de sagesse", archetype: "Sage" }, { label: "Je suis celui qui aime, inspire et transcende", archetype: "Courtisan" } ] }
    ];

    const archetypes = {
      Guerrier: { name: "Guerrier", description: "Vous √©tiez un combattant courageux, protecteur des faibles et d√©fenseur de la justice.", traits: ["Courage in√©branlable", "Force physique", "Esprit de protection", "Discipline"], workAxes: ["Canaliser votre force", "D√©velopper la patience", "Trouver l'√©quilibre"] },
      Sage: { name: "Sage", description: "Vous √©tiez un chercheur de v√©rit√©, un gardien du savoir ancestral.", traits: ["Soif de connaissance", "Sagesse", "Analyse profonde", "Vision"], workAxes: ["Partager le savoir", "√âquilibrer l'intellect", "Agir concr√®tement"] },
      Sorcier: { name: "Sorcier", description: "Vous √©tiez un ma√Ætre des forces mystiques, manipulant les √©nergies invisibles.", traits: ["Connexion mystique", "Intuition puissante", "Transformation", "Cycles naturels"], workAxes: ["Servir le bien", "Humilit√©", "√âthique magique"] },
      Explorateur: { name: "Explorateur", description: "Vous √©tiez un aventurier infatigable, toujours en qu√™te de nouveaux horizons.", traits: ["Soif d'aventure", "Adaptabilit√©", "Ind√©pendance", "Ouverture"], workAxes: ["Cr√©er des racines", "Sagesse durable", "Pers√©v√©rance"] },
      Souverain: { name: "Souverain", description: "Vous √©tiez un leader n√©, capable de gouverner avec autorit√© et vision.", traits: ["Leadership", "Strat√©gie", "Responsabilit√©", "Inspiration"], workAxes: ["Servir plut√¥t que dominer", "Empathie", "Flexibilit√©"] },
      Gu√©risseur: { name: "Gu√©risseur", description: "Vous √©tiez un soignant d√©vou√©, apaisant les souffrances.", traits: ["Compassion", "Gu√©rison", "Empathie", "D√©vouement"], workAxes: ["Prendre soin de soi", "Limites saines", "L√¢cher prise"] },
      Rebelle: { name: "Rebelle", description: "Vous √©tiez un r√©volutionnaire, remettant en question l'ordre √©tabli.", traits: ["Esprit r√©volutionnaire", "Audace", "Cr√©ativit√©", "Libert√©"], workAxes: ["Changement constructif", "Sagesse des combats", "Coop√©ration"] },
      Courtisan: { name: "Courtisan", description: "Vous √©tiez un ma√Ætre de l'art social, charmant et influent.", traits: ["Charisme", "Diplomatie", "Intelligence √©motionnelle", "Influence"], workAxes: ["Authenticit√©", "Profondeur", "Sinc√©rit√©"] },
      Pr√™tre: { name: "Pr√™tre", description: "Vous √©tiez un guide spirituel, pont entre le divin et l'humain.", traits: ["Connexion spirituelle", "D√©votion", "Inspiration", "Sagesse"], workAxes: ["Ouverture d'esprit", "Spiritualit√© active", "√âquilibre"] },
      Artisan: { name: "Artisan", description: "Vous √©tiez un cr√©ateur talentueux, transformant la mati√®re en beaut√©.", traits: ["Ma√Ætrise technique", "Cr√©ativit√©", "Patience", "D√©tail"], workAxes: ["Partage", "L√¢cher-prise", "Estime de soi"] },
      Ermite: { name: "Ermite", description: "Vous √©tiez un solitaire √©clair√©, trouvant la sagesse dans l'isolement.", traits: ["Contemplation", "Ind√©pendance", "Sagesse int√©rieure", "Clart√©"], workAxes: ["Partager la sagesse", "Connexion sociale", "Int√©gration"] },
      Barde: { name: "Barde", description: "Vous √©tiez un conteur inspir√©, gardien des l√©gendes.", traits: ["Talent artistique", "Inspiration", "Communication", "Cr√©ativit√©"], workAxes: ["Profondeur", "Substance", "Discipline"] }
    };

    let currentQuestion = 0;
    let scores = {};
    let shuffledQuestions = [];

    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    // NOUVELLE FONCTION POUR VALIDER LE FORMULAIRE
    function validateAndStart() {
        const nameInput = document.getElementById('user-name');
        const emailInput = document.getElementById('user-email');
        const errorMsg = document.getElementById('form-error');

        if (nameInput.value.trim() === '' || emailInput.value.trim() === '') {
            errorMsg.style.display = 'block';
            return;
        }

        errorMsg.style.display = 'none';
        
        // Stockage des infos
        currentUser.name = nameInput.value.trim();
        currentUser.email = emailInput.value.trim();

        // Lancement du quiz
        startQuiz();
    }

    function startQuiz() {
      shuffledQuestions = shuffleArray(questions).map(q => ({
        ...q,
        options: shuffleArray(q.options)
      }));
      currentQuestion = 0;
      scores = {};
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('quiz').classList.remove('hidden');
      showQuestion();
    }

    function showResult() {
      const winner = Object.entries(scores).sort((a, b) => b[1] - a[1])[0][0];
      const result = archetypes[winner];
      
      // ENVOI DES DONN√âES COMPL√àTES √Ä LA BDD
      fetch('save_result.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
            username: currentUser.name,
            email: currentUser.email,
            archetype: winner,
            // On ajoute les traits et les axes ici :
            traits: result.traits,       
            work_axes: result.workAxes
        })
      })
      .then(res => res.json())
      .then(data => console.log('Enregistr√© avec succ√®s:', data))
      .catch(err => console.error('Erreur:', err));

      // Affichage (Le reste ne change pas)
      document.getElementById('quiz').classList.add('hidden');
      document.getElementById('result').classList.remove('hidden');
      document.getElementById('result').classList.add('fade-in');
      
      document.getElementById('display-username').textContent = currentUser.name;
      document.getElementById('result-name').textContent = result.name;
      document.getElementById('result-desc').textContent = result.description;
      
      document.getElementById('traits').innerHTML = result.traits.map(t => 
        `<div class="trait-item"><div class="trait-dot"></div><span>${t}</span></div>`
      ).join('');
      
      document.getElementById('axes').innerHTML = result.workAxes.map((a, i) => 
        `<div class="axis-item"><div class="axis-number">${i + 1}</div><p>${a}</p></div>`
      ).join('');
    }

    function answer(archetype) {
      scores[archetype] = (scores[archetype] || 0) + 1;
      currentQuestion++;
      
      if (currentQuestion < shuffledQuestions.length) {
        showQuestion();
      } else {
        showResult();
      }
    }

    function showResult() {
      const winner = Object.entries(scores).sort((a, b) => b[1] - a[1])[0][0];
      const result = archetypes[winner];
      
      // ENVOI DES DONN√âES COMPL√àTES √Ä LA BDD
      fetch('save_result.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
            username: currentUser.name,
            email: currentUser.email,
            archetype: winner,
            // On ajoute les traits et les axes ici :
            traits: result.traits,       
            work_axes: result.workAxes
        })
      })
      .then(res => res.json())
      .then(data => console.log('Enregistr√© avec succ√®s:', data))
      .catch(err => console.error('Erreur:', err));

      // Affichage (Le reste ne change pas)
      document.getElementById('quiz').classList.add('hidden');
      document.getElementById('result').classList.remove('hidden');
      document.getElementById('result').classList.add('fade-in');
      
      document.getElementById('display-username').textContent = currentUser.name;
      document.getElementById('result-name').textContent = result.name;
      document.getElementById('result-desc').textContent = result.description;
      
      document.getElementById('traits').innerHTML = result.traits.map(t => 
        `<div class="trait-item"><div class="trait-dot"></div><span>${t}</span></div>`
      ).join('');
      
      document.getElementById('axes').innerHTML = result.workAxes.map((a, i) => 
        `<div class="axis-item"><div class="axis-number">${i + 1}</div><p>${a}</p></div>`
      ).join('');
    }

    function restartQuiz() {
      // On garde le m√™me utilisateur pour recommencer
      document.getElementById('result').classList.add('hidden');
      document.getElementById('result').classList.remove('fade-in');
      startQuiz();
      
      // Si vous voulez revenir au formulaire d'accueil, utilisez plut√¥t ceci :
      /*
      document.getElementById('result').classList.add('hidden');
      document.getElementById('welcome').classList.remove('hidden');
      document.getElementById('user-name').value = '';
      document.getElementById('user-email').value = '';
      */
    }
  </script>
</body>
</html>